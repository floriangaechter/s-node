<?phpif(XT::getParam('source_type') != ""){    $source_type = 'target_content_type=' . XT::getParam('source_type');    $source_type_rev = 'content_type=' . XT::getParam('source_type');}else {    $stop = true;}if(XT::getParam('source_id') != ""){    $source_id = ' AND target_content_id=' . XT::getParam('source_id');    $source_id_rev = ' AND content_id=' . XT::getParam('source_id');}else {    $in = "";    if(is_array($GLOBALS['relations'][XT::getParam('source_type')])){        foreach ($GLOBALS['relations'][XT::getParam('source_type')] as $key => $value) {            $in .= "," . $key;        }        if($in!=''){            $source_id = ' AND target_content_id IN(' . substr($in,1) . ")";            $source_id_rev = ' AND content_id IN(' . substr($in,1) . ")";        }    }else{        $stop = true;    }}if(!$stop){    $result = XT::query("SELECT rel.* FROM " . XT::getTable('relations') . " as rel    WHERE ("    . $source_type    . $source_id    . ") OR ("    . $source_type_rev    . $source_id_rev .    ")  ORDER by position "    ,__FILE__,__LINE__);    $thesourceid = XT::getParam('source_id');    while($row = $result->FetchRow()){        if($row['target_content_id'] == $thesourceid){        	$data['DATA'][] = array_merge(array("reverse" => false),$row);        }else {        	$data['DATA'][] = array_merge(array("reverse" => true),$row);        }    }    if(is_array($data['DATA'])){        foreach ($data['DATA'] as $key => $value) {            $data['GROUPEDDATA'][$value['content_type']][] = $value;        }    }else {    	$data['GROUPEDDATA'] = array();    }    XT::assign("xt" . XT::getBaseID() . "_fulllist", $data);    // Fetch content    if($GLOBALS['plugin']->getParam("style") != ""){        $style = $GLOBALS['plugin']->getParam("style");    }else{        $style = "default.tpl";    }    $content = XT::build($style);}?>